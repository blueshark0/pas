## 目的
本文档旨在明确定义一款个人记账App的核心功能和特性。该App的主要目标是帮助用户跟踪其个人财务状况，并通过预设未来特定日期的收入和支出项，来模拟和预测资金余额的变化。

## 项目范围
### 核心功能:
+ 记录和显示当前账户余额。
+ 允许用户预设未来特定日期的收入项（金额、日期、描述）。
+ 允许用户预设未来特定日期的支出项（金额、日期、描述）。
+ 系统在到达指定日期时，自动根据当天预设的收支项更新账户余额。
+ 提供查看预设收支项列表（未来和已执行）的功能。
+ 提供查看余额变化历史记录的功能。

### 暂不包含 (V1.0):
+ 多账户管理。
+ 复杂的预算功能。
+ 账单扫描、银行账户同步。
+ 详细的收支分类与统计图表。
+ 周期性自动记账（如每月固定工资、房租等，V1聚焦单次预设）。
+ 数据云同步与备份（V1优先考虑本地存储）。

### 名词定义
+ **用户:** App的最终使用者。
+ **余额:** 用户当前拥有的资金总额。
+ **预设项/预设交易:** 用户提前设定好的，将在未来某个指定日期发生的收入或支出事件。
+ **收入项:** 导致余额增加的预设交易。
+ **支出项:** 导致余额减少的预设交易。
+ **执行日期:** 预设交易计划发生的日期。
+ **系统:** 指本App软件。

## 功能需求 (Functional Requirements)
### FR01: 账户余额管理
+ **FR01.01:** 系统应能显示用户当前的资金余额。
+ **FR01.02:** 用户首次使用App时，应能设置一个初始余额。
+ **FR01.03:** 用户应能随时查看当前余额。

### FR02: 预设交易管理
+ **FR02.01: 添加预设交易:**
    - 用户应能创建一个新的预设交易。
    - 创建时需指定：交易类型（收入/支出）、金额、执行日期、可选的文字描述/备注。
+ **FR02.02: 查看预设交易列表:**
    - 用户应能查看所有已添加的预设交易列表。
    - 列表应清晰展示每项交易的类型、金额、执行日期、描述。
    - 列表应能区分“待执行”（执行日期在未来）和“已执行”（执行日期在过去或今天且已被处理）的状态。
    - 列表最好能按执行日期排序（例如，近期在前）。
+ **FR02.03: 修改预设交易:**
    - 对于“待执行”的预设交易，用户应能修改其金额、执行日期、描述。
+ **FR02.04: 删除预设交易:**
    - 对于“待执行”的预设交易，用户应能将其删除。

### FR03: 自动余额更新 (核心模拟机制)
+ **FR03.01:** 系统应能在每次启动时，或在后台（如果可行且必要），检查当前日期。
+ **FR03.02:** 系统应查找所有执行日期为当天（或早于当天但尚未处理）的“待执行”预设交易。
+ **FR03.03:** 对于找到的每一笔预设交易： 
    - 如果是收入项，系统应将该笔金额增加到当前余额上。
    - 如果是支出项，系统应从当前余额中减去该笔金额。
+ **FR03.04:** 成功更新余额后，系统应将该笔预设交易的状态标记为“已执行”。
+ **FR03.05:** 若同一天有多笔预设交易，系统应按一定顺序（如按添加顺序或任意顺序）全部处理。

### FR04: 历史记录查看
+ **FR04.01:** 用户应能查看账户余额发生变化的历史记录。
+ **FR04.02:** 历史记录应至少展示：变更日期、变更类型（如：初始设置、预设收入执行、预设支出执行）、变更金额、变更后的余额。

### FR05: 数据持久化
+ **FR05.01:** 用户的余额、所有预设交易（包括待执行和已执行的）都必须在App关闭后仍然保存。
+ **FR05.02:** 数据应存储在用户设备的本地存储中。

## 非功能需求 (Non-Functional Requirements)
### NF01: 性能
    - **NF01.01:** App启动和界面切换应流畅。
    - **NF01.02:** 余额自动更新过程不应造成用户可感知的卡顿。大量预设项的处理也应在合理时间内完成。

### NF02: 可靠性
    - **NF02.01:** 余额计算必须精确无误。
    - **NF02.02:** 预设交易的自动执行逻辑必须可靠，不应遗漏或重复处理。
    - **NF02.03:** 数据存储应稳定，避免数据丢失。

### NF03: 易用性
    - **NF03.01:** 界面设计应简洁直观，用户无需学习即可轻松上手。
    - **NF03.02:** 添加/编辑预设交易的操作流程应尽可能简单快捷。日期选择控件应易于使用。
    - **NF03.03:** 关键信息（如当前余额、即将到来的预设交易）应在主界面突出显示。

### NF04: 安全性
    - **NF04.01:** 由于数据仅本地存储，主要依赖设备自身的安全机制。App本身不处理敏感的银行账户信息。

### NF05: 可维护性
    - **NF05.01:** 代码结构应清晰，便于未来扩展功能（如添加周期性记账、分类统计等）。

## 用户界面 (UI) 与用户体验 (UX) 需求
### UI01: 主界面:
+ 清晰展示当前余额。
+ 可能包含快速入口以添加预设收入/支出。
+ 可能预览几条即将到期的预设交易。

### UI02: 预设交易列表界面:
+ 使用列表形式展示所有预设交易。
+ 通过图标、颜色或文字明确区分收入和支出。
+ 明确标示交易状态（待执行/已执行）。
+ 提供添加、编辑、删除操作的入口。

### UI03: 添加/编辑界面:
+ 包含输入金额、选择日期、输入描述的表单。
+ 提供清晰的“保存”和“取消”按钮。
+ 类型选择（收入/支出）应明显且易于切换。

### UI04: 历史记录界面:
+ 按时间倒序展示余额变更记录。

### UX01: 操作反馈:
+ 用户进行添加、修改、删除操作后，应有明确的成功或失败提示。
+ 当系统自动执行预设交易并更新余额时，可以考虑给用户一个（可选的）通知或在App内有明显标记。

## 数据需求
### 余额数据:
    - 当前余额 (CurrentBalance): 数值型 (例如，Decimal 或 Double，注意精度)

### 预设交易数据 (PresetTransaction):
    - 唯一ID (TransactionID): 字符串或整数，用于标识
    - 类型 (Type): 枚举型 (Income / Expense)
    - 金额 (Amount): 数值型 (正数)
    - 执行日期 (ExecutionDate): 日期型
    - 描述 (Description): 字符串 (可选)
    - 状态 (Status): 枚举型 (Pending / Executed)
    - 创建时间 (CreationTime): 时间戳 (可选，用于排序或记录)

### 历史记录数据 (BalanceHistory):
    - 唯一ID (HistoryID): 字符串或整数
    - 变更时间 (Timestamp): 时间戳
    - 变更类型 (ChangeType): 枚举型 (InitialSet / PresetIncome / PresetExpense / ManualEdit 等)
    - 关联交易ID (RelatedTransactionID): 字符串或整数 (可选，关联到具体的预设交易)
    - 变更金额 (AmountChange): 数值型 (可正可负)
    - 变更后余额 (BalanceAfter): 数值型

## 系统需求
+ **SR01: 目标平台:**
    - 兼容手机端和电脑端

##  未来考虑
+ 周期性预设交易（每周、每月、每年）。
+ 收支分类与统计图表。
+ 关键词搜索交易记录。
+ 手动即时记账功能（非预设）。

